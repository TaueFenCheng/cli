{"version":3,"sources":["/home/project/cli/packages/cli/dist/index.js","../index.ts"],"names":["__create","Object","create","__defProp","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__getProtoOf","getPrototypeOf","__hasOwnProp","prototype","hasOwnProperty","__export","target","all","name","get","enumerable","__copyProps","to","from","except","desc","key","call","__toESM","mod","isNodeMode","__esModule","value","__toCommonJS","cli_exports","inquirerFn","module","exports","import_node_path","require","import_node_fs","import_inquirer","import_node_util","import_chalk","import_ora","import_download_git_repo","import_figlet","baseProject","log","console","projectMap","projectPath","path","join","params","inquirer","prompt","type","message","choices","default","then","answers","projectName","projectType","pathInput","fs","existsSync","mkdirSync","recursive","copyFile","utils","promisify","copyDir","promises","cp","findPaths","find","item","spinner","ora","start","sourceDirReact","res","stop","chalk","red","catch","error","writeFileSync","sourceDirVue","isTtyError"],"mappings":"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","sourcesContent":["var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// index.ts\nvar cli_exports = {};\n__export(cli_exports, {\n  inquirerFn: () => inquirerFn\n});\nmodule.exports = __toCommonJS(cli_exports);\nvar import_node_path = __toESM(require(\"path\"));\nvar import_node_fs = __toESM(require(\"fs\"));\nvar import_inquirer = __toESM(require(\"inquirer\"));\nvar import_node_util = __toESM(require(\"util\"));\nvar import_chalk = __toESM(require(\"chalk\"));\nvar import_ora = __toESM(require(\"ora\"));\nvar import_download_git_repo = __toESM(require(\"download-git-repo\"));\nvar import_figlet = __toESM(require(\"figlet\"));\nvar baseProject = `../../projects`;\nvar log = console.log;\nvar projectMap = [\n  {\n    key: \"react\",\n    projectPath: import_node_path.default.join(baseProject, \"/rspack_demo\")\n  },\n  {\n    key: \"node\",\n    projectPath: import_node_path.default.join(baseProject, \"/node_demo\")\n  },\n  {\n    key: \"vue\",\n    projectPath: import_node_path.default.join(baseProject, \"/vite_demo\")\n  }\n];\nasync function inquirerFn(params) {\n  console.log(params, \"\\u547D\\u4EE4\\u884C\\u53C2\\u6570\");\n  import_inquirer.default.prompt([\n    {\n      type: \"input\",\n      name: \"projectName\",\n      message: \"\\u8BF7\\u8F93\\u5165\\u9879\\u76EE\\u540D\\u79F0:\"\n    },\n    {\n      type: \"list\",\n      name: \"projectType\",\n      message: \"\\u8BF7\\u9009\\u62E9\\u9879\\u76EE\\u7C7B\\u578B:\",\n      choices: [\"node\", \"react\", \"vue\"]\n    },\n    {\n      type: \"input\",\n      name: \"pathInput\",\n      message: \"\\u8BF7\\u8F93\\u5165\\u9879\\u76EE\\u8DEF\\u5F84:\",\n      default: \"./\"\n    }\n  ]).then((answers) => {\n    const { projectName, projectType, pathInput } = answers;\n    const projectPath = `${pathInput}/${projectName}`;\n    if (!import_node_fs.default.existsSync(projectPath)) {\n      import_node_fs.default.mkdirSync(projectPath, { recursive: true });\n      console.log(\n        `\\u521B\\u5EFA\\u9879\\u76EE: ${projectName} \\u7C7B\\u578B: ${projectType} \\u5728\\u8DEF\\u5F84: ${projectPath}`\n      );\n      const copyFile = import_node_util.default.promisify(import_node_fs.default.copyFile);\n      const copyDir = import_node_fs.default.promises.cp;\n      const findPaths = (path2) => projectMap.find((item) => item.key === path2).projectPath;\n      const spinner = (0, import_ora.default)(\"Loading...\").start();\n      switch (projectType) {\n        case \"react\":\n          const sourceDirReact = findPaths(projectType);\n          console.log(sourceDirReact);\n          copyDir(sourceDirReact, `${projectPath}/`, { recursive: true }).then((res) => {\n            spinner.stop();\n            log(import_chalk.default.red(\"\\u9879\\u76EE\\u62F7\\u8D1D\\u6210\\u529F\"));\n          }).catch((error) => {\n            spinner.stop();\n            console.log(error);\n          });\n          break;\n        case \"node\":\n          import_node_fs.default.writeFileSync(`${projectPath}`, \"// React \\u9879\\u76EE\\u5165\\u53E3\");\n          break;\n        case \"vue\":\n          const sourceDirVue = findPaths(projectType);\n          console.log(sourceDirVue);\n          copyDir(sourceDirVue, `${projectPath}/`, { recursive: true }).then((res) => {\n            log(\"\\u9879\\u76EE\\u62F7\\u8D1D\\u6210\\u529F!\");\n          }).catch((error) => {\n            console.log(error);\n          });\n          break;\n        default:\n          console.log(\"\\u672A\\u77E5\\u7684\\u9879\\u76EE\\u7C7B\\u578B\");\n      }\n    } else {\n      console.log(\"\\u9879\\u76EE\\u8DEF\\u5F84\\u5DF2\\u5B58\\u5728\\uFF0C\\u8BF7\\u9009\\u62E9\\u5176\\u4ED6\\u540D\\u79F0\\u6216\\u8DEF\\u5F84\\u3002\");\n    }\n  }).catch((error) => {\n    if (error.isTtyError) {\n      console.log(\"\\u65E0\\u6CD5\\u5728\\u5F53\\u524D\\u73AF\\u5883\\u4E2D\\u6E32\\u67D3\\u63D0\\u793A\");\n    } else {\n      console.log(\"\\u53D1\\u751F\\u9519\\u8BEF:\", error);\n    }\n  });\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  inquirerFn\n});\n","import path from \"node:path\";\nimport fs from \"node:fs\";\nimport inquirer from \"inquirer\";\nimport utils from \"node:util\";\nimport chalk from \"chalk\";\nimport ora from \"ora\";\nimport download from \"download-git-repo\";\nimport figlet from 'figlet';\n\nconst baseProject = `../../projects`;\nconst log = console.log;\n\n\nconst downloadFun = function (url: any, project: any) {\n  const spinner = ora('Downloading source...').start();\n\n  download(url, project, {clone: true}, (err) => {\n    if (!err) {\n      spinner.succeed(chalk.green('Download successful!'));\n      console.log(chalk.yellow(figlet.textSync('Done!', { horizontalLayout: 'full' })));\n      console.log(chalk.blue(`You can start by running:\ncd ${project}\n${chalk.green('npm install')}\n${chalk.green('npm run dev')}`));\n    } else {\n      spinner.fail(chalk.red('Download failed'));\n      console.error(chalk.red(err));\n    }\n  });\n}\n\n\nconst projectMap = [\n  {\n    key: \"react\",\n    projectPath: path.join(baseProject, \"/rspack_demo\"),\n  },\n  {\n    key: \"node\",\n    projectPath: path.join(baseProject, \"/node_demo\"),\n  },\n  {\n    key: \"vue\",\n    projectPath: path.join(baseProject, \"/vite_demo\"),\n  },\n];\nexport async function inquirerFn(params: any) {\n  console.log(params, \"命令行参数\");\n  inquirer\n    .prompt([\n      {\n        type: \"input\",\n        name: \"projectName\",\n        message: \"请输入项目名称:\",\n      },\n      {\n        type: \"list\",\n        name: \"projectType\",\n        message: \"请选择项目类型:\",\n        choices: [\"node\", \"react\", \"vue\"],\n      },\n      {\n        type: \"input\",\n        name: \"pathInput\",\n        message: \"请输入项目路径:\",\n        default: \"./\",\n      },\n    ])\n    .then((answers) => {\n      const { projectName, projectType, pathInput } = answers;\n      const projectPath = `${pathInput}/${projectName}`;\n\n      if (!fs.existsSync(projectPath)) {\n        fs.mkdirSync(projectPath, { recursive: true });\n        console.log(\n          `创建项目: ${projectName} 类型: ${projectType} 在路径: ${projectPath}`\n        );\n\n        const copyFile = utils.promisify(fs.copyFile);\n        const copyDir = fs.promises.cp;\n\n        const findPaths = (path: \"react\" | \"node\" | \"vue\") =>\n          projectMap.find((item) => item.key === path).projectPath;\n        const spinner = ora(\"Loading...\").start();\n\n        // 根据项目类型创建不同的项目结构\n        switch (projectType) {\n          case \"react\":\n            const sourceDirReact = findPaths(projectType);\n            console.log(sourceDirReact);\n            copyDir(sourceDirReact, `${projectPath}/`, { recursive: true })\n              .then((res) => {\n                spinner.stop();\n                log(chalk.red(\"项目拷贝成功\"));\n              })\n              .catch((error) => {\n                spinner.stop();\n                // console.error(error);\n                console.log(error);\n              });\n            break;\n          case \"node\":\n            // 创建React项目结构\n            fs.writeFileSync(`${projectPath}`, \"// React 项目入口\");\n            break;\n          case \"vue\":\n            // 创建Vue项目结构\n            const sourceDirVue = findPaths(projectType);\n            console.log(sourceDirVue);\n            copyDir(sourceDirVue, `${projectPath}/`, { recursive: true })\n              .then((res) => {\n                log(\"项目拷贝成功!\");\n              })\n              .catch((error) => {\n                // console.error(error);\n                console.log(error);\n              });\n            break;\n          default:\n            console.log(\"未知的项目类型\");\n        }\n      } else {\n        console.log(\"项目路径已存在，请选择其他名称或路径。\");\n      }\n    })\n    .catch((error) => {\n      if (error.isTtyError) {\n        console.log(\"无法在当前环境中渲染提示\");\n      } else {\n        console.log(\"发生错误:\", error);\n      }\n    });\n}\n"]}